let categoryConfig={},shop=pirkspark_shop_data.shop;const server="https://killerddd.pl/picture_categories/";var product=frontAPI.getProductsList({});fetch(server+"api.php?shop="+shop,{method:"GET"}).then(function(e){return e.json()}).then(e=>{if(1==e.setting.activity){if(categoryConfig=e.configCategories,null!=$(".shop_product_list")){var i=$('<div class="categories-img" style="opacity:0;"></div>');let e=!1;$.when(frontAPI.getCategoryChildrens(function(t){t.count>0&&($(".categories-img").html(""),t.list.map(a=>{a.category_id in categoryConfig&&"1"==categoryConfig[a.category_id].custom_image?(""!=categoryConfig[a.category_id].image&&null!=categoryConfig[a.category_id].image?i.append(`<a href="${a.url}"><div class="single"><div class="img-wrapper"><img class="cat-img" src="${server}images/${shop}/${categoryConfig[a.category_id].image}"></div><span>${a.translation.name}</span></div></a>`):i.append(`<a href="${a.url}"><div class="single"><div class="img-wrapper"><img class="cat-img" src="${server}assets/images/no_image.png"></div><span>${a.translation.name}</span></div></a>`),i.find("a").length==t.count&&(e=!0)):frontAPI.getProductsFromCategory(function(r){if(0==r.list.length)i.append(`<a href="${a.url}"><div class="single"><div class="img-wrapper"><img class="cat-img" src="https://killerddd.pl/picture_categories/assets/images/no_image.png"></div><span>${a.translation.name}</span></div></a>`);else{var s=r.list.reduce(function(e,i){return e.id<i.id?e:i});i.append(`<a href="${a.url}"><div class="single"><div class="img-wrapper"><img class="cat-img" src="/userdata/public/gfx/${s.main_image}/${s.main_image}.jpg"></div><span>${a.translation.name}</span></div></a>`)}i.find("a").length==t.count&&(e=!0)},{urlParams:"?limit=50",id:a.category_id})}))},{lang:"pl_PL",id:$("body").attr("id").replace("shop_category",""),urlParams:"?limit=50"})).done(function(){var t=setInterval(()=>{e&&($("#box_mainproducts .boxhead").after(i),clearInterval(t))},100)})}function t(){window.innerWidth<768?document.querySelector(".categories-img").style.gridTemplateColumns=`repeat(${e.setting.mobile_width},1fr)`:window.innerWidth>768&&this.window.innerWidth<1024?document.querySelector(".categories-img").style.gridTemplateColumns=`repeat(${e.setting.tablet_width},1fr)`:window.innerWidth>=1024&&(document.querySelector(".categories-img").style.gridTemplateColumns=`repeat(${e.setting.desktop_width},1fr)`),document.querySelectorAll(".categories-img .single").forEach(i=>{i.style.backgroundColor=e.setting.color})}window.addEventListener("resize",()=>{t()}),window.addEventListener("load",()=>{var e=setInterval(()=>{null!=document.querySelector(".categories-img")&&(clearInterval(e),t(),i.css("opacity","1"))},100)})}});